---
import BaseLayout from "@layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const allThoughts = await getCollection("thoughts", ({ data }) => !data.draft);
const sortedThoughts = allThoughts.sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<BaseLayout title="Thoughts - Ram Sharan Rimal">
  <div class="space-y-8">
    <!-- Header -->
    <section>
      <h1 class="text-4xl font-bold mb-4">
        <span class="terminal-prompt"></span>Thoughts<span class="cursor"
        ></span>
      </h1>
      <p class="text-solarized-base0">
        Essays, reflections, and musings on technology, philosophy, and life.
        Longer-form pieces where I explore ideas more deeply.
      </p>
    </section>

    <!-- Thoughts List -->
    <section>
      {
        sortedThoughts.length === 0 ? (
          <p class="text-solarized-base00">No thoughts yet. Check back soon!</p>
        ) : (
          <div class="space-y-5">
            {sortedThoughts.map((thought) => (
              <article>
                <a href={`/thoughts/${thought.slug}`} class="group block">
                  <div class="flex justify-between items-baseline mb-1">
                    <h2 class="text-base group-hover:text-solarized-blue transition-colors" style="color: var(--color-orange);">
                      {thought.data.title}
                    </h2>
                    <time datetime={thought.data.date.toISOString()} class="text-sm text-solarized-base00 ml-4 whitespace-nowrap">
                      {thought.data.date.toLocaleDateString("en-US", {
                        year: "numeric",
                        month: "2-digit",
                        day: "2-digit",
                      }).replace(/\//g, '.')}
                    </time>
                  </div>
                  {thought.data.description && (
                    <p class="text-sm text-solarized-base00">
                      {thought.data.description}
                    </p>
                  )}
                </a>
              </article>
            ))}
          </div>
        )
      }
    </section>
  </div>
</BaseLayout>
