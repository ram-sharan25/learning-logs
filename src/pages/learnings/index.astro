---
import BaseLayout from "@layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const allLearnings = await getCollection("learnings", ({ data }) => !data.draft);
const sortedLearnings = allLearnings.sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<BaseLayout title="Learning Logs - Ram Sharan Rimal">
  <div class="space-y-6 md:space-y-8">
    <!-- Header -->
    <section>
      <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-3 md:mb-4">
        <span class="terminal-prompt"></span>Learning Logs<span class="cursor"
        ></span>
      </h1>
      <p class="text-sm sm:text-base text-solarized-base0">
        Raw notes, insights, and learnings from books, essays, and explorations.
        Not polished blog postsâ€”just honest reflections and connections.
      </p>
    </section>

    <!-- Learnings List -->
    <section>
      {
        sortedLearnings.length === 0 ? (
          <p class="text-sm sm:text-base text-solarized-base00">No learning logs yet. Check back soon!</p>
        ) : (
          <div class="space-y-4 sm:space-y-5">
            {sortedLearnings.map((learning) => (
              <article>
                <a href={`/learnings/${learning.slug}`} class="group block">
                  <div class="flex flex-col sm:flex-row sm:justify-between sm:items-baseline mb-1 gap-1 sm:gap-0">
                    <h2 class="text-sm sm:text-base group-hover:text-solarized-blue transition-colors" style="color: var(--color-orange);">
                      {learning.data.title}
                    </h2>
                    <time datetime={learning.data.date.toISOString()} class="text-xs sm:text-sm text-solarized-base00 sm:ml-4 sm:whitespace-nowrap">
                      {learning.data.date.toLocaleDateString("en-US", {
                        year: "numeric",
                        month: "2-digit",
                        day: "2-digit",
                      }).replace(/\//g, '.')}
                    </time>
                  </div>
                  {learning.data.topic && (
                    <p class="text-xs sm:text-sm text-solarized-base00">
                      {learning.data.topic}
                    </p>
                  )}
                </a>
              </article>
            ))}
          </div>
        )
      }
    </section>
  </div>
</BaseLayout>
